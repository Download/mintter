strict_env

if ! has nix; then
    log_error 'Nix must be installed'
    exit 1
fi

export NIXPKGS_ALLOW_BROKEN=1

# Asking git to rebase before pull.
# This helps avoiding nasty merge commits between local and remote branches,
# like "Merge branch 'master' of <remote>".
# The slight inconvenience is that git won't pull into a dirty workspace,
# asking to stash or commit the changes before pulling.
git config pull.rebase true

use nix --max-jobs auto
watch_file shell.nix build/nix/**/*.nix

export TAMAGUI_TARGET="web"
# export NEXT_PUBLIC_GRPC_API="https://gateway.mintter.com"
# export NEXT_PUBLIC_GRPC_API="http://localhost:56001"
# export MINTTER_IS_GATEWAY="1"
export NEXT_PUBLIC_GRPC_API="http://localhost:56001"

export VITE_MINTTER_GATEWAY_URL="https://mintter.com"
export MINTTER_HOME_PUBID="bafy2bzaceajij5bzr4yakyaxmjgffu7jq4y3sdie2tozl65igufxgrcu464gi"
export MINTTER_HOME_VERSION="baeaxdiheaiqizbsrt7joblgzp2nj6r7kptdzyv2nvsuzstxlhs5ujrhk7a4n6pi"
# Needed for the Go extension in VS Code to find the right toolchain.
export GOROOT="$(go env GOROOT)"
